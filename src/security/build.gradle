dependencies {
    compile 'org.pac4j:spark-pac4j:2.0.0'
    compile 'org.pac4j:pac4j-jwt:2.0.0'
    compile 'commons-codec:commons-codec:1.10'
    compile 'org.abstractj.kalium:kalium:0.6.0'

    testCompile "junit:junit:4.12"
    testCompile "org.mockito:mockito-core:2.+"
    testCompile "com.nhaarman:mockito-kotlin:1.3.0"
    testCompile "org.assertj:assertj-core:3.6.2"
    testCompile "com.beust:klaxon:0.31"
    testCompile project(":testHelpers")

    compile project(":models")
    compile project(":databaseInterface")
}

task install_libsodium() {
    def file = file("/usr/local/lib/libsodium.so.18.2.0")
    if (!file.exists()) {
        throw new Exception("libsodium is not installed. Please run ./scripts/install-libsodium.sh")
    }
}

build {
    dependsOn 'install_libsodium'
}